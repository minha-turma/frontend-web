<div class="content-wrapper">

  <app-main-component-title title="Minhas Turmas"></app-main-component-title>

  <!-- Main content -->
  <section class="content">

    <!-- Info boxes -->
    <div class="row">
      <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="info-box">
          <span class="info-box-icon bg-aqua"><i class="fa fa-child"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Total de Alunos</span>
            <span class="info-box-number">{{studentsCount}}<small> Alunos</small></span>
          </div>
          <!-- /.info-box-content -->
        </div>
        <!-- /.info-box -->
      </div>
      <!-- /.col -->
      <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="info-box">
          <span class="info-box-icon bg-red"><i class="fa fa-group"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Turmas</span>
            <span class="info-box-number">{{schoolClassCount}} <small>Turmas</small></span>
          </div>
          <!-- /.info-box-content -->
        </div>
        <!-- /.info-box -->
      </div>
      <!-- /.col -->

      <!-- fix for small devices only -->
      <div class="clearfix visible-sm-block"></div>

      <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="info-box">
          <span class="info-box-icon bg-{{ getColor(presenceAvg) }}"><i class="fa fa-check"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Média de Presença</span>
            <span class="info-box-number">{{presenceAvg.toFixed(2)}}<small>%</small></span>
          </div>
          <!-- /.info-box-content -->
        </div>
        <!-- /.info-box -->
      </div>
      <!-- /.col -->
      <div class="col-md-3 col-sm-6 col-xs-12">
        <div class="info-box">
          <span class="info-box-icon bg-yellow"><i class="fa fa-list-alt"></i></span>

          <div class="info-box-content">
            <span class="info-box-text">Quizzes</span>
            <span class="info-box-number">{{quizzesCount}} <small>Quizzes</small></span>
          </div>
          <!-- /.info-box-content -->
        </div>
        <!-- /.info-box -->
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <div class="box">
      <div class="box-header with-border">
        <h3 class="box-title">Lista de Turmas</h3>
      </div>
      <div class="box-body">
        <div class="row">
          <div class="col-md-12">

            <div class="box box-success direct-chat direct-chat-success" *ngFor="let group of groups">
              <div class="box-header with-border">
                <h3 class="box-title">{{ group.name }}</h3>

                <div class="box-tools pull-right">
                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                  </button>
                </div>
              </div>
              <!-- /.box-header -->
              <div class="box-body">

                <div class="row">
                  <div class="col-md-12">
                      <table class="table table-bordered">
                          <tbody>
                            <tr>
                              <th style="width: 10px">#</th>
                              <th>Nome do Aluno</th>
                              <th>Presença</th>
                              <th style="width: 40px">Sentimento</th>
                            </tr>
                            <tr *ngFor="let user of group.students; index as i">
                              <td>{{ i }}</td>
                              <td style="width: 60%"><a>{{ user.name }}</a></td>
                              <td style="width: 15%">
                                <span class="badge bg-{{ getColor(user.presence) }}">{{ user.presence.toFixed(2) }}%</span>
                              </td>
                              <td style="width: 15%">
                                <img src="assets/{{ getFeelingImage(user) }}" width="30px">
                              </td>
                            </tr>
                          </tbody>
                        </table>
                    <!-- /.box -->
                  </div>
                </div>

              </div>
              <!-- /.box-body -->
            </div>
          </div>
        </div>

      </div>
      <div class="box-footer">
          <div>
              <label for="files" class="btn btn-success pull-right">Importar Alunos</label>

              <input type="file" 
                     id="files" 
                     style="visibility:hidden;" 
                     class="btn btn-success" 
                     (change)="onFileChange($event)" 
                     multiple="false" 
                     name="Importar Alunos">
            </div>
        
      </div>
    </div>

    <div class="row" *ngIf="!hasStudents">
        <div class="col-md-6">
            <h3 class="lead">Nenhum aluno cadastrado</h3>
        </div>
    </div>

  </section>
</div>